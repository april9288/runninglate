(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,a){e.exports=a(76)},38:function(e,t,a){},40:function(e,t,a){},53:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(28),i=a.n(s),o=(a(38),a(3)),c=a.n(o),l=a(6),u=a(7),m=a(8),p=a(10),h=a(9),f=a(11),d=(a(40),a(15));d.initializeApp({apiKey:"AIzaSyDsS9smcM0ksxevY2-9-7cfTuZaPXJiS7Q",authDomain:"realtimegame-b4ee3.firebaseapp.com",databaseURL:"https://realtimegame-b4ee3.firebaseio.com",projectId:"realtimegame-b4ee3",storageBucket:"realtimegame-b4ee3.appspot.com",messagingSenderId:"837731033820"});var v=d.database(),b=d.auth,g=a(30),E=a.n(g),y=a(31),S=(a(53),a(32)),k=a.n(S),I=(a(70),function(e){var t=e.displayName,a=e.handleSignout;return r.a.createElement("section",{className:"header-section"},r.a.createElement("p",{className:"header-welcome"},"Welcome ",t),r.a.createElement("button",{onClick:a},"Logout"))}),O=(a(71),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(){var e=Object(l.a)(c.a.mark(function e(t){var n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.company.value,r=a.props.user.email.split(".")[0],e.prev=3,e.next=6,v.ref(r).push({company:n});case 6:e.sent?a.props.handleRegisterUser():a.setState({error:t}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),a.setState({error:e.t0});case 13:case"end":return e.stop()}},e,null,[[3,10]])}));return function(t){return e.apply(this,arguments)}}(),a.state={error:null},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"register-section"},r.a.createElement("p",null,"Please register your company's email address"),r.a.createElement("form",{className:"register-form",onSubmit:this.handleSubmit},r.a.createElement("input",{name:"company",className:"register-input",type:"email",autoFocus:!0})))}}]),t}(n.Component)),j=a(14),N=(a(72),a(73),function(e){var t,a=e.user,n=e.situation;return"traffic"===n?t="stuck in heavy traffic":"accident"===n?t="into a car accident":"hurricane"===n?t="stuck in hurricane":"police"===n&&(t="pulled over by the police"),r.a.createElement("section",{className:"preview-section"},r.a.createElement("p",null,"Hello. This is ".concat(a.displayName,".")),r.a.createElement("p",null,"I'm so sorry. I'm on my way in now, but I got ".concat(t,". My apologies again.")),r.a.createElement("p",null,"It shouldn\u2019t be much longer. Thank you."),r.a.createElement("p",null,a.displayName),r.a.createElement("p",null,a.email))}),R=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).formUpdate=function(){a.setState({user:a.props.user.email,company:a.props.userMoreInfo.company})},a.handleChange=function(e){a.setState(Object(j.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t={user:a.props.user.displayName,emailFrom:a.state.user,emailTo:a.state.company,situation:a.state.situation};a.props.handleRequestSubmit(t)},a.state={user:"",company:"",situation:"traffic"},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.formUpdate()}},{key:"render",value:function(){return r.a.createElement("section",{className:"email-request-section"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"email-request-form"},r.a.createElement("div",{className:"email-request-form-div"},"From : ",r.a.createElement("input",{type:"email",name:"user",id:"user_email",value:this.state.user,onChange:this.handleChange})),r.a.createElement("div",{className:"email-request-form-div"},"To : ",r.a.createElement("input",{type:"email",name:"company",id:"compnay_email",value:this.state.company,onChange:this.handleChange})),r.a.createElement("div",{className:"email-request-form-div"},"Situation :",r.a.createElement("select",{className:"email-request-situation",name:"situation",id:"user_situation",value:this.state.situation,onChange:this.handleChange},r.a.createElement("option",{value:"traffic"}," heavy traffic "),r.a.createElement("option",{value:"accident"}," car accident "),r.a.createElement("option",{value:"hurricane"}," hurricane "),r.a.createElement("option",{value:"police"}," police "))),r.a.createElement(N,{user:this.props.user,situation:this.state.situation}),r.a.createElement("button",{id:"email-request-form-submit",type:"submit"},"Submit")))}}]),t}(n.Component),w=(a(74),function(){return r.a.createElement("section",{className:"footer-section"},r.a.createElement("div",null,r.a.createElement("a",{href:"https://github.com/april9288/runninglate",rel:"noopener noreferrer",target:"_blank"},r.a.createElement("i",{className:"fab fa-github-square"})),r.a.createElement("a",{href:"https://www.linkedin.com/in/james-kim-teamplayer",rel:"noopener noreferrer",target:"_blank"},r.a.createElement("i",{className:"fab fa-linkedin"}))),r.a.createElement("div",null,r.a.createElement("p",{style:{color:"white"}},"\xa9 2019 James Jongho Kim All Rights Reserved")))}),D=(a(75),function(e){var t=e.response,a=e.handleDeleteUserInfo,n=e.handleSignout;return r.a.createElement("section",{className:"thankyou-section"},"success"===t?r.a.createElement("div",null,r.a.createElement("p",null,"Thank you "),r.a.createElement("button",{onClick:n},"Logout"),r.a.createElement("button",{onClick:a},"Delete user info and logout")):r.a.createElement("div",null,r.a.createElement("p",null,"Sorry... Bad request"),r.a.createElement("button",{onClick:n},"Logout"),r.a.createElement("button",{onClick:a},"Delete user info and logout")))}),C=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).retrieveUserInfo=Object(l.a)(c.a.mark(function e(){var t,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=a.props.user,n=t.email.split(".")[0],e.next=5,v.ref(n).once("value",function(e){var t=[];e.forEach(function(e){t.push(Object(y.a)({id:e.key},e.val()))}),a.setState({userMoreInfo:t[0]})});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a.setState({error:e.t0});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),a.handleRegisterUser=function(){a.retrieveUserInfo()},a.handleRequestSubmit=function(e){e.emailTo!==a.state.userMoreInfo.company&&a.handleUpdate(e),a.sendRequestToServer(e)},a.handleUpdate=function(){var e=Object(l.a)(c.a.mark(function e(t){var n,r,s,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.user,r=n.email.split(".")[0],s=a.state.userMoreInfo.id,i=t.emailTo,e.prev=4,e.next=7,v.ref("".concat(r,"/").concat(s)).update({company:i});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log("update error");case 12:case"end":return e.stop()}},e,null,[[4,9]])}));return function(t){return e.apply(this,arguments)}}(),a.sendRequestToServer=function(){var e=Object(l.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.post("https://runninglate.herokuapp.com/email",t);case 3:202===e.sent.data.status?a.setState({serverResponse:"success"}):a.setState({serverResponse:"bad request"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a.setState({serverResponse:"bad request"});case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),a.handleDeleteUserInfo=Object(l.a)(c.a.mark(function e(){var t,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.user,n=t.email.split(".")[0],e.next=4,v.ref(n).remove();case 4:a.handleSignout();case 5:case"end":return e.stop()}},e)})),a.handleSignout=function(){var e=a.props.user.email.split(".")[0];v.ref(e).off(),a.props.signout()},a.state={userMoreInfo:null,error:null,serverResponse:null},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.retrieveUserInfo()}},{key:"render",value:function(){return r.a.createElement("section",{className:"main-section"},r.a.createElement("section",{className:"main-section-2"},r.a.createElement(I,{displayName:this.props.user.displayName,handleSignout:this.handleSignout}),r.a.createElement("section",null,void 0===this.state.userMoreInfo?r.a.createElement(O,{user:this.props.user,handleRegisterUser:this.handleRegisterUser}):this.state.userMoreInfo&&!this.state.serverResponse?r.a.createElement(R,{user:this.props.user,userMoreInfo:this.state.userMoreInfo,handleRequestSubmit:this.handleRequestSubmit}):this.state.serverResponse&&r.a.createElement(D,{response:this.state.serverResponse,handleDeleteUserInfo:this.handleDeleteUserInfo,handleSignout:this.handleSignout}))),r.a.createElement(w,null))}}]),t}(n.Component),U=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleAuth=Object(l.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b().onAuthStateChanged(function(e){e?a.setState({isSignedIn:!!e,firebaseUser:e}):console.log("login fail")});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("login fail : ",e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])})),a.handleVisitor=function(){a.setState({isSignedIn:!0,firebaseUser:{displayName:"Visitor",email:"visitor@company.com"},visitor:!0})},a.signout=function(){a.state.visitor?a.setState({isSignedIn:!1,firebaseUser:null}):b().signOut()},a.state={isSignedIn:!1,firebaseUser:null,visitor:null},a.uiConfig={signInFlow:"popup",signInOptions:[b.GoogleAuthProvider.PROVIDER_ID,b.FacebookAuthProvider.PROVIDER_ID,b.GithubAuthProvider.PROVIDER_ID,b.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.handleAuth()}},{key:"componentWillMount",value:function(){v.ref("visitor@company").remove()}},{key:"render",value:function(){return r.a.createElement("section",{className:"App"},this.state.isSignedIn?r.a.createElement(C,{user:this.state.firebaseUser,signout:this.signout}):r.a.createElement("div",{className:"loginPage"},r.a.createElement("p",{className:"loginTitle"},"Don't be late!!!"),r.a.createElement(E.a,{uiConfig:this.uiConfig,firebaseAuth:b()}),r.a.createElement("button",{className:"loginVisitor",onClick:this.handleVisitor},"I'm a visitor")))}}]),t}(n.Component);i.a.render(r.a.createElement(U,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.405c63dc.chunk.js.map